<html>
<head>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/showdownjs/showdown/1.4.2/dist/showdown.min.js"></script>
<script type="text/javascript">
	var converter = new showdown.Converter();
	var pCount;
	$(document).ready(function(){
        $.get('site.conf', function (data) {
        	console.log(data);
    		pCount = jQuery.parseJSON(data).site.project.count;
    		console.log(pCount);
			while(pCount > 0){
				var t = pCount;
				console.log('projects/proj' + t + '/proj.conf');
				$.get('projects/proj' + t + '/proj.conf',function(data){
					var newEnt = '<a onclick="loadContent(' + "'projects/proj" + t + '/';
					newEnt += jQuery.parseJSON(data).markdown;
					newEnt += "'" + ')">' + jQuery.parseJSON(data).title + '</a> | ';
					console.log(newEnt);
					$('div.index').html( $('div.index').html() + newEnt);
				});
				pCount -= 1;
			}
		});
	});
	function loadContent(url){
		$.get(url,function(data){
			$("div.content").html(converter.makeHtml(data));
		});		
	}
</script>
</head>
<body>
<div class="index">
</div>
<div class="content">
</div>
</body>
</html>